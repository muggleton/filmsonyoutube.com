var app=angular.module("filmsonyoutube",["ngRoute","angular-loading-bar","infinite-scroll"],["$interpolateProvider","$sceDelegateProvider","cfpLoadingBarProvider",function(e,r,n){e.startSymbol("<%"),e.endSymbol("%>"),r.resourceUrlWhitelist(["self","*://www.youtube.com/**"]),n.includeSpinner=!1,angular.module("infinite-scroll").value("THROTTLE_MILLISECONDS",250)}]);app.run(function(){}),app.config(["$routeProvider","$locationProvider",function(e,r){e.when("/",{templateUrl:"/views/links.html",controller:"linksController"}),e.when("/:id/:title",{templateUrl:"/views/link.html",controller:"linkController"}),r.html5Mode(!0)}]),app.controller("linkController",["$scope","$routeParams","linkService",function(e,r,n){e.init=function(){var t=n.get(r.id);t.success(function(r){e.link=r})},e.init()}]),app.controller("linksController",["$rootScope","$scope","$q","$filter","linkService","sidebarService",function(e,r,n,t,i,a){r.links=[],r.current_page=1,r.last_page=0,r.busy=!1,r.search_term="",r.sidebar=[],r.sidebar.rating=[],r.range=[],r.genres_query_string="",r.languages_query_string="",r.resolutions_query_string="",r.init=function(){r.busy=!0,a.all().then(function(e){r.sidebar=e},function(e){console.log("error",e)});var e=i.all(1,r.search_term,r.genres_query_string,r.resolutions_query_string,r.languages_query_string,0,10,0,1e4);e.success(function(e){r.current_page=e.current_page,r.last_page=e.last_page,r.links=e.data}),r.busy=!1},r.loadMore=function(){if("undefined"!=typeof r.sidebar.rating.from&&r.busy!==!0&&r.current_page!=r.last_page){r.busy=!0;var e=i.all(r.current_page+1,r.search_term,r.genres_query_string,r.resolutions_query_string,r.languages_query_string,r.sidebar.rating.from,r.sidebar.rating.to,r.sidebar.year.from,r.sidebar.year.to);e.success(function(e){for(var n=0;n<e.data.length;n++)r.links.push(e.data[n]);r.current_page=e.current_page,r.last_page=e.last_page}),r.busy=!1}},r.filterLinks=function(){r.busy=!0,r.sidebar.selected_genres=t("filter")(r.sidebar.genres,{checked:!0}),r.genres_query_string="";for(var e=0;e<r.sidebar.selected_genres.length;e++)r.genres_query_string+=","+r.sidebar.selected_genres[e].id;r.sidebar.selected_resolutions=t("filter")(r.sidebar.resolutions,{checked:!0}),r.resolutions_query_string="";for(var e=0;e<r.sidebar.selected_resolutions.length;e++)r.resolutions_query_string+=","+r.sidebar.selected_resolutions[e].id;r.sidebar.selected_languages=t("filter")(r.sidebar.languages,{checked:!0}),r.languages_query_string="";for(var e=0;e<r.sidebar.selected_languages.length;e++)r.languages_query_string+=","+r.sidebar.selected_languages[e].id;var n=i.all(1,r.search_term,r.genres_query_string,r.resolutions_query_string,r.languages_query_string,r.sidebar.rating.from,r.sidebar.rating.to,r.sidebar.year.from,r.sidebar.year.to);n.success(function(e){r.current_page=e.current_page,r.last_page=e.last_page,r.links=e.data}),r.busy=!1},r.init()}]),app.controller("navigationController",["$scope","$location",function(e,r){e.isCurrent=function(e){return e===r.path()}}]),app.service("linkService",["$http",function(e){return{all:function(r,n,t,i,a,s,l,o,u){var g=e({method:"GET",url:"/api/v1/links?page="+r+"&search="+n+"&genres="+t+"&resolution="+i+"&languages="+a+"&rating="+s+","+l+"&year="+o+","+u});return g},get:function(r){var n=e({method:"GET",url:"/api/v1/links/"+r});return n}}}]),app.service("sidebarService",function(e,r){return{all:function(){return e.get("/api/v1/sidebar").then(function(e){return"object"==typeof e.data?e.data:r.reject(e.data)},function(e){return r.reject(e.data)})}}});